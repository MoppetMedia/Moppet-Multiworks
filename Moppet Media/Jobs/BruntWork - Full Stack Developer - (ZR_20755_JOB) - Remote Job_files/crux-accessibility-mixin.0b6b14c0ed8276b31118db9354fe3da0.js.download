Lyte.Mixin.register("crux-aria-column-list-mixin",{addLiveForEmpty:function(){var e=this;setTimeout(()=>{var t;e.cxProp("noContentClass")&&(t=e.querySelector("."+e.cxProp("noContentClass"))),t&&("none"!==$L(t).css("display")?t.ariaLive="polite":t.ariaLive&&t.removeAttribute("aria-live"))},500)},keyEvent:function(){for(var e=Lyte.registeredMixins["crux-aria-column-list-mixin"],t=this.data.cxPropAccessibilityClass,a=this.$node.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),r=event.key,n=this.$node.querySelector("."+t),o=a.length,l=0;l<o;l++)this.addLabel.call(this,a[l]);if(n||("ArrowUp"===event.key?($L(a[0]).addClass(t),n=a[0]):"ArrowDown"===event.key&&($L(a[a.length-1]).addClass(t),n=a[a.length-1])),n){if(document.querySelector("#crurr_act_item")&&$L("#crurr_act_item").removeAttr("id"),a=this.$node.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),event.key.includes("Arrow")||event.key.includes("Page")){var i,c;if(n&&$L(n).removeClass(t),event.preventDefault(),event.metaKey&&n.className.includes("sortable-element")){var s=this.$node.querySelectorAll("lyte-menu-item[class *= sortable-element]"),u=s.length;for(i=0;i<u;i++)if(s[i]===n){c=i;var d=Lyte.arrayUtils(this.getData("items"),"removeAt",i,1)[0];"ArrowUp"===event.key?c=0===c?s.length-1:c-1:"ArrowDown"===event.key&&(c=c===s.length-1?0:c+1),Lyte.arrayUtils(this.getData("items"),"insertAt",c,d),this.sortableMenu.call(this),s=this.$node.querySelectorAll("lyte-menu-item[class *= sortable-element]")[c],$L(s).addClass(t)}}else if(event.key.includes("Page"))"PageUp"===event.key?$L(a[0]).addClass(t):"PageDown"===event.key&&$L(a[a.length-1]).addClass(t);else{var m=a.length;for(i=0;i<m;i++)if(a[i]===n){if(c=i,"ArrowUp"===event.key)for(c=0===c?a.length-1:c-1;a[c].className.includes("lyteSearchHidden");)c=0===c?a.length-1:c-1;else if("ArrowDown"===event.key)for(c=c===a.length-1?0:c+1;a[c].className.includes("lyteSearchHidden");)c=c===a.length-1?0:c+1;$L(a[c]).addClass(t)}}e.scrollToActiveElem.call(this,this,t,r)}else if("Enter"===event.key){if(event.preventDefault(),n){var p=n.querySelector("lyte-checkbox");p&&p.click()}for(var v=n;"LYTE-MENU-ITEM"!==v.tagName;)v=v.parentElement;n&&$L(n).removeClass(t),setTimeout(()=>{$L(v).addClass(t)},100)}else"Meta"!==event.key&&(n&&$L(n).removeClass(t),$L(a[0]).addClass(t));n.id="crurr_act_item",document.activeElement.setAttribute("aria-activedescendant","crurr_act_item")}},scrollToActiveElem:function(e,t,a){var r=Lyte.registeredMixins["crux-aria-column-list-mixin"],n=e.$node.querySelector("."+t);e.scrollableParent&&void 0!==e.scrollableParent||(e.scrollableParent=$L(n).cxGetScrollParent());var o=e.scrollableParent,l=n.offsetHeight+n.offsetTop,i=o.offsetHeight+o.offsetTop+o.scrollTop;if(n!==document.activeElement)if("ArrowUp"!==a&&"PageUp"!==a||!(l>i||n.offsetTop<o.scrollTop||Math.abs(o.scrollTop-n.offsetTop)<o.offsetTop)){if(("ArrowDown"===a||"PageDown"===a)&&(l>i||n.offsetTop<o.scrollTop||Math.abs(o.scrollTop-n.offsetTop)<o.offsetTop)){var c;if($L(o).css("overflow","hidden"),l<i&&n.offsetTop<o.scrollTop)c=$L(".cxAriaActive")[0]&&$L(".cxAriaActive")[0]._cx&&$L(".cxAriaActive")[0]._cx.itemIndex?$L(".cxAriaActive")[0]._cx.itemIndex:$L("lyte-menu-item",e.$node).indexOf(e.$node.querySelector(".cxAriaActive")),$L(o,e.$node).scrollTo({top:c*n.offsetHeight},{onAfter:function(){r.onAfterScroll.call(this,o)}});else $L(o,e.$node).scrollTo({top:o.scrollTop+(l-i)},{onAfter:function(){r.onAfterScroll.call(this,o)}})}}else $L(o).css("overflow","hidden"),n.offsetTop>o.scrollTop&&l>i?$L(o,e.$node).scrollTo({top:o.scrollTop+(l-i)},{onAfter:function(){r.onAfterScroll.call(this,o)}}):$L(o,e.$node).scrollTo($L("."+t),{onAfter:function(){r.onAfterScroll.call(this,o)}})},onAfterScroll:function(e){$L(e).css("overflow","auto")},bindEventForAriaColumnList:function(){if(console.log("column-list-mixin..."),this.$node.cxProp("aria")){for(var e=Lyte.registeredMixins["crux-aria-column-list-mixin"],t=this.data.cxPropAccessibilityClass,a=this.$node.querySelectorAll("lyte-menu-item, #inputId"),r=0;r<a.length;r++){a[r];if(this.addLabel.call(this,a[r]),"inputId"===a[r].id){if(!$L(a[r]).attr("cxAriaColListInputFocus")){var n=this;this.$node&&(n=this.$node);var o=e.addLiveForEmpty.bind(n);a[r].addEventListener("input",o),$L(a[r]).attr("cxAriaColListInputFocus",!0)}a[r].addEventListener("focusout",()=>{$L("."+t,this.$node).removeClass(t)})}}$L(this.$node).attr("cxAriaColListKeydown")||(this.listener=this.keyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaColListKeydown",!0))}},addLabel:function(e){var t,a=e;if(!a.ariaLabel){if(a.className.includes("cxColListMandatoryItem")&&(a.ariaRequired=!0),"LYTE-MENU-ITEM"===a.tagName){var r=a.querySelector("lyte-label");r&&(t=r.textContent.trim());var n=a.querySelector("[type = checkbox]");n&&(a=n)}"checkbox"===a.type&&(a=a.closest("[lyte-rendered]")),"LYTE-CHECKBOX"===a.tagName&&t&&a.ltProp("ariaCheckbox",{"aria-label":t}),a.tagName.includes("INPUT")&&(a.placeholder&&(a.ariaPlaceholder=a.placeholder),a.maxLength&&(a.ariaValueMax=a.maxLength))}}}),Lyte.Mixin.register("crux-aria-dropdown-mixin",{addLiveForEmpty:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown")),setTimeout(()=>{if(e.component&&e.component.childComp&&e.component.childComp.querySelector(".noUsersFoundDiv, .cxDropdownNoResult")){var t=e.component.childComp.querySelector(".noUsersFoundDiv, .cxDropdownNoResult");"none"!=$L(t).css("display")?t.ariaLive="polite":t.ariaLive&&t.removeAttribute("aria-live")}},500)},inputFocus:function(){for(var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;!t.tagName.includes("LYTE-DROPDOWN")&&(t._callee&&(t=t._callee),"BODY"!=t.tagName););"LYTE-DROPDOWN"!=t.tagName&&t.querySelector("lyte-dropdown")&&(t=this);var a=document.activeElement;if(!$L(a).attr("cxAriaDropdownInputFocus")){var r=e.addLiveForEmpty.bind(t);a.addEventListener("input",r),$L(a).attr("cxAriaDropdownInputFocus",!0)}document.querySelector(".cxAriaActive")&&$L(".cxAriaActive").removeClass("cxAriaActive"),$L(document.activeElement).addClass("cxAriaActive");var n="";t.querySelector("lyte-search")||t.querySelector(".userSearchBox")?n=t.querySelector("lyte-search")?t.querySelector("lyte-search"):t.querySelector(".userSearchBox"):t.component.childComp&&(t.component.childComp.querySelector("lyte-search")||t.component.childComp.querySelector(".userSearchBox"))&&(n=t.component.childComp.querySelector("lyte-search")?t.component.childComp.querySelector("lyte-search"):t.component.childComp.querySelector(".userSearchBox"));var o=a.value;if(n&&""!=o&&("LYTE-SEARCH"==n.tagName?n.setValue(o.trim()):n.className.includes("userSearchBox")&&n.ltProp("value",o.trim())),"LYTE-DROPDOWN"==t.tagName){var l=document.activeElement,i="";t.querySelector(".cxAriaActive")?i=t.querySelector(".cxAriaActive"):t.component.childComp&&t.component.childComp.querySelector(".cxAriaActive")&&(i=t.component.childComp.querySelector(".cxAriaActive")),""!=i&&(l=".cxAriaActive",t.ltProp("activeElement",l))}},onFocus:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown"));var t=document.activeElement;if(e.querySelector(".cxAriaActive")?$L(e.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxAriaActive")&&$L(e.component.childComp.querySelector(".cxAriaActive")).removeClass("cxAriaActive"),t&&!$L(t).hasClass("cxAriaActive")&&$L(t).addClass("cxAriaActive"),"LYTE-DROPDOWN"==e.tagName){t=document.activeElement;var a="";e.querySelector(".cxAriaActive")?a=e.querySelector(".cxAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxAriaActive")&&(a=e.component.childComp.querySelector(".cxAriaActive")),""!=a&&(actElem=".cxAriaActive",e.ltProp("activeElement",actElem))}},onFocusOut:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown"));var t=document.querySelector(".cxAriaActive");t&&(e.querySelector(".cxPrevAriaActive")?$L(e.querySelector(".cxPrevAriaActive")).removeClass("cxPrevAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxPrevAriaActive")&&$L(e.component.childComp.querySelector(".cxPrevAriaActive")).removeClass("cxPrevAriaActive"),$L(t).addClass("cxPrevAriaActive"),$L(t).removeClass("cxAriaActive"))},keyEvent:function(){var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;"LYTE-DROP-BOX"==t.tagName?"LYTE-DROPDOWN"!=(t=t._callee).tagName&&t.querySelector("lyte-dropdown")&&(t=t.querySelector("lyte-dropdown")):(t.$node&&(t=t.$node),"LYTE-DROPDOWN"!=t.tagName&&t.querySelector("lyte-dropdown")&&(t=t.querySelector("lyte-dropdown")));var a=t.querySelectorAll("li:not(.lyteMultiselectInput), input, lyte-dropdown lyte-dropdown .lyteDummyEventContainer");if(a=Array.from(a),t.component&&t.component.childComp&&t.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input:not(lyte-input input)")){var r=t.component.childComp,n=Array.from(r.querySelectorAll("li:not(.lyteMultiselectInput), input, lyte-dropdown .lyteDummyEventContainer"));if(a=a.concat(n),r.querySelector("lyte-input, lyte-dropdown")&&!$L(r).attr("cxAriaDropdownKeydown")&&(r.listener=e.keyEvent.bind(t),r.addEventListener("keydown",r.listener),$L(r).attr("cxAriaDropdownKeydown",!0)),r.querySelector("lyte-input"))"LYTE-INPUT"!=(c=r.querySelector("lyte-input")).tagName||$L(c).attr("cxAriaDropdownInputFocus")||(c.addEventListener("focusin",e.inputFocus.bind(t)),$L(c).attr("cxAriaDropdownInputFocus",!0))}else setTimeout(()=>{if(t.component&&t.component.childComp&&t.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input:not(lyte-input input)")){var a=t.component.childComp;if(a.querySelector("lyte-input, lyte-dropdown")&&!$L(a).attr("cxAriaDropdownKeydown")&&(a.listener=e.keyEvent.bind(a),a.addEventListener("keydown",a.listener),$L(a).attr("cxAriaDropdownKeydown",!0)),a.querySelector("lyte-input")){var r=a.querySelector("lyte-input");"LYTE-INPUT"!=r.tagName||$L(r).attr("cxAriaDropdownInputFocus")||(r.addEventListener("focusin",e.inputFocus.bind(t)),$L(r).attr("cxAriaDropdownInputFocus",!0))}}},100);!t.querySelector("lyte-input")||t.component.childComp&&t.component.childComp.querySelector("lyte-input")||("LYTE-INPUT"!=(c=t.querySelector("lyte-input")).tagName||$L(c).attr("cxAriaDropdownInputFocus")||(c.addEventListener("focusin",e.inputFocus.bind(t)),$L(c).attr("cxAriaDropdownInputFocus",!0)));for(var o=-1,l="",i=0;i<a.length;i++){var c;0==(c=a[i]).tabIndex&&c.ariaLabel||e.addLabel.call(t,c),$L(c).attr("cxAriaDropdownFocus")||(c.addEventListener("focusin",e.onFocus.bind(t)),c.addEventListener("focusout",e.onFocusOut.bind(t)),$L(c).attr("cxAriaDropdownFocus",!0)),c.className.includes("cxAriaActive")&&a.includes(c)&&(o=i,l=c)}var s=document.activeElement,u=!0;if("INPUT"==s.tagName&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){u=!1;var d=s.value.length,m=event.target.selectionStart;(d==m&&"ArrowRight"==event.key||0==m&&"ArrowLeft"==event.key)&&(u=!0)}if(u&&""!=l&&-1!=o)if(event.key.includes("Arrow")){var p=o,v=a.length;if("ArrowLeft"==event.key||"ArrowRight"==event.key){a[p].classList.contains("lyteDummyEventContainer")&&a[p].parentElement.ltProp("isOpen")&&a[p].parentElement.close();do{"ArrowLeft"==event.key?p=0==p?v-1:p-1:"ArrowRight"==event.key&&(p=p==v-1?0:p+1)}while("none"==$L(a[p]).css("display"));a[p].classList.contains("lyteDummyEventContainer")&&a[p].parentElement.ltProp("isOpen")&&a[p].parentElement.close(),a[p].focus()}}else if("Backspace"==event.key||"Delete"==event.key){if(document.activeElement==l){if("INPUT"==document.activeElement.tagName&&0==document.activeElement.value.length){for(var y=document.activeElement;"LYTE-DROP-BUTTON"!=y.tagName&&(!y.previousElementSibling||"LI"!=y.previousElementSibling.tagName);)y=y.parentElement;"LYTE-DROP-BUTTON"==y.tagName||y.previousElementSibling.querySelector("input")||y.previousElementSibling.focus(),document.activeElement.className.includes("cxAriaActive")||$L(document.activeElement).addClass("cxAriaActive")}t.querySelector(".cxAriaActive")&&t.querySelector(".cxAriaActive").children.length>0&&(t.querySelector(".cxAriaActive").children[1].focus(),t.querySelector(".cxAriaActive").children[1].click())}if("INPUT"!=l.tagName&&"LYTE-INPUT"!=l.tagName){if(t.component.childComp&&t.component.childComp.querySelector("lyte-input"))t.component.childComp.querySelector("lyte-input").focus();else t.querySelector("lyte-input")&&t.querySelector("lyte-input").focus();event.preventDefault()}event.stopImmediatePropagation()}else if("Escape"==event.key){var b=t;t.component&&t.component.childComp&&t.component.childComp.querySelector("lyte-dropdown .cxAriaActive")&&t.component.childComp.querySelector("lyte-dropdown").ltProp("isOpen")&&(b=t.component.childComp.querySelector("lyte-dropdown")),a.includes(document.activeElement)&&(b.querySelector(".cxAriaActive")||b.component&&b.component.childComp&&b.component.childComp.querySelector(".cxAriaActive"))&&b.ltProp("isOpen")&&(b.close(),event.stopImmediatePropagation()),b&&b.querySelector("[tabindex]")&&!b.querySelector("[tabindex]").className.includes("cxAriaActive")&&($L(".cxAriaActive").removeClass("cxAriaActive"),t.querySelector("[tabindex]").focus())}else" "!==event.key&&"Enter"!==event.key||!s.className.includes("cxAriaActive")||!$L(s).attr("click")&&!$L(s).attr("onClick")||s.click()},bindEventForAria:function(){var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;t.$node&&(t=t.$node),setTimeout(()=>{var a=t.querySelectorAll("lyte-dropdown:not(lyte-dropdown lyte-dropdown)");if(t&&t.cxProp("aria")){for(var r=0;r<a.length;r++){var n=a[r];if("multiple"==n.ltProp("type")||"multisearch"==n.ltProp("type")){var o=n,l=o.querySelectorAll("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer");if(l=Array.from(l),o.component&&o.component.childComp&&o.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer")){var i=o.component.childComp,c=Array.from(i.querySelectorAll("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer"));l=l.concat(c),"LYTE-DROPDOWN"!=i.tagName||$L(i).attr("cxAriaDropdownKeydown")||(i.listener=e.keyEvent.bind(o),i.addEventListener("keydown",i.listener),$L(i).attr("cxAriaDropdownKeydown",!0))}for(r=0;r<l.length;r++){0==(s=l[r]).tabIndex&&s.ariaLabel||"LYTE-DROPDOWN"==s.tagName||"LYTE-INPUT"==s.tagName||e.addLabel.call(o,s),"LYTE-INPUT"!=s.tagName||$L(s).attr("cxAriaDropdownInputFocus")||(s.addEventListener("focusin",e.inputFocus.bind(n)),$L(s).attr("cxAriaDropdownInputFocus",!0)),$L(s).attr("cxAriaDropdownFocus")||"LYTE-DROPDOWN"==s.tagName||"LYTE-INPUT"==s.tagName||(s.addEventListener("focusin",e.onFocus.bind(n)),s.addEventListener("focusout",e.onFocusOut.bind(n)),$L(s).attr("cxAriaDropdownFocus",!0))}"LYTE-DROPDOWN"!=o.tagName||$L(o).attr("cxAriaDropdownKeydown")||(o.listener=e.keyEvent.bind(o),o.addEventListener("keydown",o.listener),$L(o).attr("cxAriaDropdownKeydown",!0))}}if("CRUX-TAG-COMPONENT"==t.tagName&&"view"==t.cxProp("from")){for(l=t.querySelectorAll("li"),r=0;r<l.length;r++){var s;0==(s=l[r]).tabIndex&&s.ariaLabel||e.addLabel.call(t,s),$L(s).attr("cxAriaDropdownFocus")||(s.addEventListener("focusin",e.onFocus.bind(t)),s.addEventListener("focusout",e.onFocusOut.bind(t)),$L(s).attr("cxAriaDropdownFocus",!0))}$L(t).attr("cxAriaDropdownKeydown")||(t.listener=e.keyEvent.bind(t),t.addEventListener("keydown",t.listener),$L(t).attr("cxAriaDropdownKeydown",!0))}}},100)},addLabel:function(e){if("LI"==e.tagName&&(e.tabIndex=0),!e.ariaLabel&&-1!=e.tabIndex){var t="",a="";if("INPUT"==e.tagName||e.className.includes("lyteDummyEventContainer")){for(a=e;!a.tagName.includes("LYTE")&&"BODY"!=(a=a.parentElement).tagName;);a.tagName.includes("LYTE")||(a="")}if("INPUT"==e.tagName?(t=e.value?e.value.trim():"none",e.placeholder&&(e.ariaPlaceholder=e.placeholder),e.maxLength&&(e.ariaValueMax=e.maxLength)):e.textContent&&(t=e.textContent.trim()),t){var r=e.closest("[lyte-rendered]");if(r.tagName.includes("LYTE"))switch(r.ltProp("aria",!0),r.tagName){case"LYTE-DROPDOWN":r.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":r.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":r.ltProp("ariaRadio",{"aria-label":t});break;default:r.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-lookup-filter-mixin",{onFocus:function(){var e=document.activeElement;"lv_filter_scroll"!=e.id&&(document.querySelector(".cxAriaActive")?$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):($L(e).addClass("cxAriaActive"),event.stopImmediatePropagation()))},onFocusOut:function(){document.querySelector(".cxAriaActive")&&$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive")},lookUpKeyEvent:function(){var e=Lyte.registeredMixins["crux-aria-lookup-filter-mixin"],t=event.currentTarget;t.$node&&(t=t.$node);var a=t.modalContainer,r=t.table,n=t.querySelector(".cxAriaActive");this.bindLabelAndIndex.call(this);var o=document.activeElement;if(n&&(o=n),event.target==o){var l=Lyte.registeredMixins["crux-aria-table-mixin"];$L(r).attr("listener")&&(r.removeEventListener("keydown",l.actionCompEvent),$L(r).removeAttr("listener"))}if(!n||n.tagName.includes("TD")||n.tagName.includes("TH")||$L(t).attr("subKeyListen"))$L(t).attr("subKeyListen")||t.removeEventListener("keydown",e.lookUpSubKeyEvent);else{t.addEventListener("keydown",e.lookUpSubKeyEvent),$L(t).attr("subKeyListen",!0),!r.attributes.listener&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","false"),event.stopImmediatePropagation();var i=new KeyboardEvent("keydown",{key:event.key});t.dispatchEvent(i)}" "!=event.key||$L(t).attr("subKeyListen")||"true"==$L(t).attr("subKeyListen")||(event.preventDefault(),(n.tagName.includes("TH")||n.tagName.includes("TD"))&&n.querySelector("[tabIndex]")&&n.querySelector("[tabIndex]").focus(),$L(t).attr("subKeyListen")||(t.addEventListener("keydown",e.lookUpSubKeyEvent),$L(t).attr("subKeyListen",!0)),!r.attributes.listener&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","false"),event.stopImmediatePropagation())},lookUpSubKeyEvent:function(){var e=Lyte.registeredMixins["crux-aria-lookup-filter-mixin"],t=event.currentTarget;t.$node&&(t=t.$node);var a=t.modalContainer,r=t.table,n=event.currentTarget;$L(n).attr("cxLookupFilterFocusout")||(document.addEventListener("click",function a(){var r=t.querySelector(".cxAriaActive");r&&(r.tagName.includes("TD")||r.tagName.includes("TH"))&&$L(r).attr("focusable")&&$L(t).attr("subKeyListen")&&(t.removeEventListener("keydown",e.lookUpSubKeyEvent),$L(t).removeAttr("subKeyListen")),$L(t).attr("cxLookupFilterFocusout")&&(document.removeEventListener("click",a),$L(n).removeAttr("cxLookupFilterFocusout"))}),$L(n).attr("cxLookupFilterFocusout",!0));var o=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td"),l=t.querySelector(".cxAriaActive"),i=!0;if(l&&"INPUT"==l.tagName&&"inputId"!=l.id&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){i=!1;var c=l.value.length,s=(event.target.ariaLabel?event.target:event.target.querySelector(".cxAriaActive")).selectionStart;(c==s&&"ArrowRight"==event.key||0==s&&"ArrowLeft"==event.key)&&(i=!0)}if(i&&(event.key.includes("Arrow")||"Escape"==event.key))for(var u=0;u<o.length;u++){var d=0,m=o[u].querySelectorAll("[tabIndex]:not(#inputId, li)");if(m.length<=0&&(m=[]).push(o[u]),o[u]==l||o[u].querySelector(".cxAriaActive")){for(var p=0;p<m.length;p++)if(m[p]==l||m[p].querySelector(".cxAriaActive")||o[u]==l){var v;if(m[p].querySelector(".cxAriaActive")||event.preventDefault(),event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){if("ArrowUp"==event.key||"ArrowDown"==event.key)v=p,"ArrowUp"==event.key?v=0==v?m.length-1:v-1:"ArrowDown"==event.key&&(v=v==m.length-1?0:v+1),m[v].focus();else if("ArrowLeft"==event.key||"ArrowRight"==event.key)if(v=u,"ArrowLeft"==event.key?v=0==v?o.length-1:v-1:"ArrowRight"==event.key&&(v=v==o.length-1?0:v+1),o[v].querySelectorAll("[tabIndex]:not(#inputId, li)").length>p)o[v].querySelectorAll("[tabIndex]:not(#inputId, li)")[p].focus();else if(o[v].querySelectorAll("[tabIndex]:not(#inputId, li)").length<=0)o[v].focus();else{for(;o[v].querySelectorAll("[tabIndex]:not(#inputId, li)").length<=p&&p>0;)p--;o[v].querySelectorAll("[tabIndex]:not(#inputId, li)")[p].focus()}d=1,event.stopImmediatePropagation();break}if("Escape"==event.key){var y=t.querySelector(".cxAriaActive");if(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft"))for(;"LYTE-DROPDOWN"!=y.tagName;)y=y.parentElement;m[p]==l?(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")?(y.close(),event.stopImmediatePropagation()):(o[u].focus(),$L(t).attr("subKeyListen")&&(t.removeEventListener("keydown",e.lookUpSubKeyEvent),$L(t).removeAttr("subKeyListen"))),d=1):m[p].querySelector(".cxAriaActive")&&(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")&&y.close(),m[p].focus(),event.stopImmediatePropagation(),d=1);var b=document.activeElement;y&&(b=y);for(var x=b;!x.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!=x.tagName&&"BODY"!=x.tagName;)x=x.parentElement;if(event.target==b||x==event.target&&y==b){var f=Lyte.registeredMixins["crux-aria-table-mixin"];$L(r).attr("listener")&&(r.removeEventListener("keydown",f.actionCompEvent),$L(r).removeAttr("listener")),!r.attributes.listener&&!t.attributes.subKeyListen&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","true"),event.stopImmediatePropagation()}if(1==d)break}}if(1==d)break}}else if("Enter"==event.key)if(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft"))t.component&&t.component.bindLabelAndIndex.call(t.component);else{var A=document.activeElement;document.activeElement.click(),$L(A).addClass("cxAriaActive"),A.focus()}},bindLabelAndIndex:function(){for(var e=this.$node.querySelectorAll("[tabIndex]"),t=0;t<e.length;t++){var a=e[t];if("inputId"==a.id){for(var r=a;"LYTE-DROPDOWN"!=r.tagName&&"CRUX-LOOKUPFILTER-COMPONENT"!=r.tagName;)r=r.parentElement;"LYTE-DROPDOWN"==r.tagName&&(a=r.querySelector(".lyteDummyEventContainer"))}a.tabIndex&&a.ariaLabel||this.addLabel.call(this,a)}},bindEventForAriaLookUpFilter:function(){if(this.$node.cxProp("aria")){for(var e=this.$node.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, [tabIndex], [click], [onclick]"),t=0;t<e.length;t++){var a=e[t];if("inputId"==a.id){for(var r=a;"LYTE-DROPDOWN"!=r.tagName&&"CRUX-LOOKUPFILTER-COMPONENT"!=r.tagName;)r=r.parentElement;"LYTE-DROPDOWN"==r.tagName&&(a=r.querySelector(".lyteDummyEventContainer"))}this.addLabel.call(this,a),$L(a).attr("cxAriaLookupFilterFocus")||(a.addEventListener("focusin",this.onFocus),a.addEventListener("focusout",this.onFocusOut),$L(a).attr("cxAriaLookupFilterFocus",!0))}$L(this.$node).attr("cxAriaLookupFilterKeydown")||(this.listener=this.lookUpKeyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaLookupFilterKeydown",!0));var n=this.$node;if(this.$node._callee&&("CRUX-TABLE-COMPONENT"!=(n=this.$node._callee).tagName&&"LYTE-TABLE"!=n.tagName&&"LYTE-EXPRESSTABLE"!=n.tagName&&"TABLE"!=n.tagName||(n.tagName.includes("CRUX")&&n.querySelector("lyte-table, lyte-expresstable, table")&&(n=n.querySelector("lyte-table, lyte-expresstable, table")),this.$node.table=n)),document.querySelector("[cxAriaTableFocusableParent]")){var o=document.querySelector("[cxAriaTableFocusableParent]");if(o.component){var l=o=o.component;for(l.$node&&(l=l.$node);!(l.component&&l.component.parent||"LYTE-WORMHOLE"==l.tagName||"BODY"==l.tagName);)l=l.parentElement;this.$node.modalContainer=l}}setTimeout(()=>{var e=this;if(this.$node&&(e=this.$node),e.querySelector("lyte-dropdown"))for(var t=e.querySelectorAll("lyte-dropdown"),a=0;a<t.length;a++)t[a].component&&t[a].component.childComp&&t[a].component.childComp.className&&!t[a].component.childComp.className.includes("Hidden")&&t[a].close();e.firstElementChild&&e.firstElementChild.focus()},100)}},addLabel:function(e){var t,a=e;if(!a.tagName.includes("TD")&&!a.tagName.includes("TH")||a.tabIndex&&-1!=a.tabIndex||(a.tabIndex=0),!e.ariaLabel&&-1!=a.tabIndex){if("LYTE-MENU-ITEM"==a.tagName&&(a=a.querySelector("[type = checkbox]")),"checkbox"==a.type&&(a=a.parentElement),"INPUT"==a.tagName)t=a.value?a.value:"none",a.placeholder&&(a.ariaPlaceholder=a.placeholder),a.maxLength&&(a.ariaValueMax=a.maxLength);else if(a.childNodes.length>0)if(a.querySelector("span"))t=a.querySelector("span").textContent;else if(a.querySelector("#inputId")){var r=a.querySelector("#inputId");r.value?t=r.value:r.placeholder&&(t=r.placeholder)}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){var n=e.closest("[lyte-rendered]");if(n.tagName.includes("LYTE"))switch(n.ltProp("aria",!0),n.tagName){case"LYTE-DROPDOWN":n.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":n.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":n.ltProp("ariaRadio",{"aria-label":t});break;default:n.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-lookup-mixin",{onFocus:function(){var e=document.activeElement,t=this;t.$node&&(t=t.$node),t.querySelector(".cxAriaActive")&&$L(".cxAriaActive",t).removeClass("cxAriaActive"),e&&!$L(e).hasClass("cxAriaActive")&&$L(e).addClass("cxAriaActive")},onFocusOut:function(){var e=this;e.$node&&(e=e.$node);var t=$L(e.querySelector(".cxAriaActive"));t[0]&&(e.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",e).removeClass("cxPrevAriaActive"),t.hasClass("cxPrevAriaActive")||t.addClass("cxPrevAriaActive"),t.removeClass("cxAriaActive"))},keyEventOnShow:function(){console.log("my snippet registered and runnning...");var e=this.$node;if(e.cxProp("aria")){var t=!1;if(this.data.show?t=this.data.show:this.data.cxPropShow&&(t=this.data.cxPropShow),t){var a=document.activeElement;if(event&&event.target&&("click"===event.type||"keydown"===event.type)&&(a=event.target),"BODY"!==a.tagName&&!a.querySelector(".cxSetRefocus")&&!a.classList.contains("cxSetRefocus")&&a.attributes){for(var r=!0;!a.attributes.click&&!a.attributes.onclick;)if("BODY"===(a=a.parentElement).tagName){r=!1;break}r&&($L(a).addClass("cxSetRefocus"),-1===a.tabIndex&&(a.tabIndex=0))}setTimeout(()=>{var t=e;for(t.querySelector("lyte-modal")&&(t=t.querySelector("lyte-modal"));"CRUX-LOOKUP-FILTER-VIEW"!==t.tagName&&"LYTE-MODAL"!==t.tagName;)t=t._callee;if(t&&t.component&&(t.component.childComp||"CRUX-LOOKUP-FILTER-VIEW"===t.tagName)){var a=t.component.childComp?t.component.childComp:t;a.querySelector("lyte-table, lyte-expresstable, table")&&Lyte.registeredMixins["crux-aria-table-mixin"]&&Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria&&a.cxProp("aria")&&(a.bindAria=Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria.bind(a),a.bindAria());var r=a.querySelectorAll("[tabindex]:not(crux-table-component [tabindex]), [click]"),n=Lyte.registeredMixins["crux-aria-lookup-mixin"];r.forEach(e=>{""!==e.attributes.tabindex&&((e.attributes.click||e.attributes.onclick)&&e.className.includes("advanceFilter")?(e.setAttribute("lt-prop-aria-keydown",!0),e.setAttribute("role","button"),n.addLabel.call(a,e)):e.attributes.click||e.attributes.onclick||n.addLabel.call(a,e))})}},100)}else setTimeout(()=>{if(document.querySelector(".cxSetRefocus")){var e=document.querySelector(".cxSetRefocus");-1===e.tabIndex&&(e.tabIndex=0),e.focus(),$L(".cxSetRefocus").removeClass("cxSetRefocus")}},150)}}.observes("cxPropShow","show","cxPropAria"),setLabelForModal:function(){var e=this.$node;!e.cxProp("aria")||"CRUX-LOOKUP-FILTER-VIEW"!==e.tagName&&"CRUX-LOOKUP-MODAL"!==e.tagName||setTimeout(()=>{for(var e=this.$node,t=e;!("BODY"===e.parentElement.tagName||(e=e.parentElement).component&&e.component.parent);)if("BODY"===e.parentElement.tagName){e=t;break}var a=e.querySelectorAll("[tabindex]:not(crux-table-component [tabindex]), [click]"),r=Lyte.registeredMixins["crux-aria-lookup-mixin"];a.forEach(t=>{""!=t.attributes.tabindex&&((t.attributes.click||t.attributes.onclick)&&t.className.includes("advanceFilter")?(t.setAttribute("lt-prop-aria-keydown",!0),t.setAttribute("role","button"),t.setAttribute("label","Filter"),r.addLabel.call(e,t)):t.attributes.click||t.attributes.onclick||r.addLabel.call(e,t))})},500)}.on("didConnect"),addLabel:function(e){var t=Lyte.registeredMixins["crux-aria-lookup-mixin"];if(!e.ariaLabel&&-1!==e.tabIndex){var a="",r=e.querySelector("#labelText");if(e.attributes.label?(a=e.attributes.label.nodeValue,e.ariaLabel=a,$L(e).removeAttr("label")):r&&r.textContent&&""!==r.textContent.trim()?a+=r.textContent.trim():e.textContent&&""!==e.textContent.trim()?a+=e.textContent.trim():a+="icon",e._callee&&"LYTE-INPUT"===e._callee.tagName&&"search"===e._callee.ltProp("type")&&(e.ariaPlaceholder=e.placeholder,e.ariaValueMax=e.maxLength),!e.querySelector('[tabIndex = "0"]')&&e.textContent.trim().length>0){var n=e.closest("[lyte-rendered]");if(n.tagName.includes("LYTE"))switch(n.ltProp("aria",!0),n.tagName){case"LYTE-DROPDOWN":n.ltProp("ariaButton",{"aria-label":a});break;case"LYTE-CHECKBOX":n.ltProp("ariaCheckbox",{"aria-label":a});break;case"LYTE-RADIOBUTTON":n.ltProp("ariaRadio",{"aria-label":a});break;default:n.ltProp("ariaAttributes",{"aria-label":a})}else e.ariaLabel=a}e.querySelectorAll("[focusable]").length<1&&$L(e).attr("focusable","true"),t.onFocus&&(e.addEventListener("focusin",t.onFocus.bind(this)),e.addEventListener("focusout",t.onFocusOut.bind(this)))}}}),Lyte.Mixin.register("crux-aria-smart-filter-input-mixin",{onFocus:function(){var e=document.activeElement;"lv_filter_scroll"!=e.id&&(document.querySelector(".cxAriaActive")?$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):$L(e).addClass("cxAriaActive"))},onFocusOut:function(){document.querySelector(".cxAriaActive")&&$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive")},filterInputKeyEvent:function(){if(document.querySelector(".lyteBodyWrapper"))"Enter"==event.key&&setTimeout(()=>{var e=this.$node.querySelectorAll('[tabIndex]:not([tabIndex][aria-label]), [type = radio]:not([tabIndex][aria-label]), [tabIndex]:not([aria-label = ""])');if(e.length>0)for(var t=0;t<e.length;t++){var a=e[t];if("INPUT"==a.tagName||"LI"==a.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=a.tagName&&"LYTE-DROPDOWN"!=a.tagName;)a=a.parentElement;"LYTE-DROPDOWN"!=a.tagName&&(a=e[t])}this.addLabel.call(this,a),$L(a).attr("cxAriaSmartFilterInputFocus")||(a.addEventListener("focusin",this.onFocus),a.addEventListener("focusout",this.onFocusOut),$L(a).attr("cxAriaSmartFilterInputFocus",!0))}},100);else{if((l=this.$node.querySelectorAll('[tabIndex]:not([tabIndex][aria-label]), [type = radio]:not([tabIndex][aria-label]), [tabIndex]:not([aria-label = ""]), [tabIndex]:not(.cxMXNFld [tabIndex])')).length>0)for(var e=0;e<l.length;e++){var t=l[e];if("radio"==t.type){for(var a=t;"DIV"!=a.tagName;)a=a.parentElement;$L(a).attr("role","radiogroup"),$L(t).attr("role","radio"),$L(t).attr("aria-labelledby",t.parentElement.querySelector(".lyteRadioLabel").id),t.checked?t.ariaChecked=!0:t.ariaChecked=!1}if("INPUT"==t.tagName||"LI"==t.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=t.tagName&&"LYTE-DROPDOWN"!=t.tagName;)t=t.parentElement;"LYTE-DROPDOWN"!=t.tagName&&(t=l[e])}this.addLabel.call(this,t),$L(t).attr("cxAriaSmartFilterInputFocus")||(t.addEventListener("focusin",this.onFocus),t.addEventListener("focusout",this.onFocusOut),$L(t).attr("cxAriaSmartFilterInputFocus",!0))}var r=document.activeElement,n=!0;if(("inputId"==r.id||"LI"==r.tagName||r==this.$node.querySelector(".cxMXNFld input"))&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){for(var o=r;"LYTE-DROPDOWN"!=o.tagName;)o=o.parentElement;"multiple"==o.component.data.ltPropType&&(o=o.querySelector(".lyteDummyEventContainer")),r=o,o.focus()}var l=this.$node.querySelectorAll("[tabIndex][aria-label]:not(.cvSubOption [tabIndex][aria-label], #inputId, li, .cxMXNFld input), [type = radio][aria-label]");if(this.$node.className.includes("cvSubOption")&&(l=this.$node.querySelectorAll("[tabIndex][aria-label]:not(#inputId, li, .cxMXNFld input), [type = radio][aria-label]")),"INPUT"==r.tagName&&"text"==r.type&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){n=!1;var i=r.value.length,c=event.target.selectionStart;(i==c&&"ArrowRight"==event.key||0==c&&"ArrowLeft"==event.key)&&(n=!0)}if("radio"==r.type){for(a=r;"DIV"!=a.tagName;)a=a.parentElement;$L(a).attr("role","radiogroup"),$L(r).attr("role","radio"),$L(r).attr("aria-labelledby",r.parentElement.querySelector(".lyteRadioLabel").id),r.checked?r.ariaChecked=!0:r.ariaChecked=!1}if(" "==event.key&&"radio"==r.type){for(var s=r;"LYTE-RADIOBUTTON"!=s.tagName;)s=s.parentElement;(s=s.nextElementSibling).querySelector("[tabIndex][aria-label]")&&s.querySelector("[tabIndex][aria-label]").focus()}else if(n&&event.key.includes("Arrow")){if(!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){event.preventDefault();for(e=0;e<l.length;e++)if((r==l[e]||r==l[e].parentElement)&&!l[e].querySelector(".lyteDropButtonDown, .lyteDropButtonUp, .lyteDropButtonLeft, .lyteDropButtonRight")){if(l[e].id&&"inputId"==l[e].id||l[e]==this.$node.querySelector(".cxMXNFld input")){for(o=document.activeElement;"LYTE-DROPDOWN"!=o.tagName;)o=o.parentElement;document.querySelector(".lyteDropButtonDown, .lyteDropButtonUp, .lyteDropButtonLeft, .lyteDropButtonRight")&&o.close()}var u=e;if("ArrowUp"==event.key||"ArrowDown"==event.key){for(l=this.$node;!l.className.includes("leftElements");)l=l.parentElement;for(var d=l;"CRUX-SMART-FILTER"!=d.tagName;)d=d.parentElement;d=d.querySelectorAll(".leftElements, lyte-accordion-header");for(e=0;e<d.length;e++)if(d[e].querySelector(".cxAriaActive")){u=e;"ArrowDown"==event.key&&(u=u==d.length-1?0:u+1),"LYTE-ACCORDION-HEADER"==d[u].tagName?d[u].focus():d[u].querySelector("[type = checkbox]").focus();break}event.stopImmediatePropagation();break}if("ArrowLeft"==event.key||"ArrowRight"==event.key){"ArrowLeft"==event.key?u=0==u?l.length-1:u-1:"ArrowRight"==event.key&&(u=u==l.length-1?0:u+1),l[u].focus(),"LYTE-DROPDOWN"==l[u].tagName?l[u].querySelector(".lyteDummyEventContainer").click():l[u].click();break}if(document.activeElement.id&&"inputId"==document.activeElement.id||"LI"==document.activeElement.tagName||document.activeElement==this.$node.querySelector(".cxMXNFld input")){for(var m=document.activeElement;"LYTE-DROPDOWN"!=m.tagName&&"CRUX-SMART-FILTER"!=m.tagName&&"CRUX-SMART-FILTER-INPUT"!=m.tagName;)m=m.parentElement;m.focus();break}}event.stopPropagation()}}else if("Escape"==event.key)if("LI"==document.activeElement.tagName||"inputId"==document.activeElement.id||this.$node.querySelector(".cxMXNFld input")){for(s=document.activeElement;"LYTE-DROPDOWN"!=s.tagName&&"CRUX-SMART-FILTER"!=s.tagName&&"CRUX-SMART-FILTER-INPUT"!=s.tagName;)s=s.parentElement;"multiple"==s.component.data.ltPropType&&(s=s.querySelector(".lyteDummyEventContainer")),document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")?s.close():(event.preventDefault(),"LYTE-DROPDOWN"!=s.tagName&&"LYTE-DROPDOWN"!=s.parentElement.tagName||(event.stopImmediatePropagation(),s.focus()))}else this.$node.className.includes("cvSubOption")&&this.$node.previousElementSibling.focus();else"Enter"==event.key?"checkbox"==document.activeElement.type?document.activeElement.click():setTimeout(()=>{for(var e=this.$node.querySelectorAll("[tabIndex]:not([tabIndex][aria-label])"),t=0;t<e.length;t++)this.addFocus.call(this,e[t]);document.activeElement.className.includes("cxAriaActive")||$L(document.activeElement).addClass("cxAriaActive")},50):!event.key.includes("Page")&&" "!=event.key&&"INPUT"!=document.activeElement.tagName&&document.activeElement.querySelector("input[tabIndex]")&&document.activeElement.querySelector("input[tabIndex]").focus()}this.$node.querySelector(".cxAriaActive")&&this.addLabel.call(this,this.$node.querySelector(".cxAriaActive"))},bindEventForAriaFilterInput:function(){var e=document.activeElement,t=this.$node.querySelectorAll("[tabIndex], [type = radio]");if(t.length>0&&this.$node.cxProp("aria"))for(var a=0;a<t.length;a++){var r=t[a];if("radio"==r.type){for(var n=r;"DIV"!=n.tagName;)n=n.parentElement;$L(n).attr("role","radiogroup"),$L(r).attr("role","radio"),$L(r).attr("aria-labelledby",r.parentElement.querySelector(".lyteRadioLabel").id),r.checked?r.ariaChecked=!0:r.ariaChecked=!1,r.parentElement.onmouseup=this.radioCheck,r.parentElement.onkeydown=this.radioCheck}if("INPUT"==r.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=r.tagName&&"LYTE-DROPDOWN"!=r.tagName;)r=r.parentElement;"LYTE-DROPDOWN"!=r.tagName&&(r=t[a])}this.addLabel.call(this,r),$L(r).attr("cxAriaSmartFilterInputFocus")||(r.addEventListener("focusin",this.onFocus),r.addEventListener("focusout",this.onFocusOut),$L(r).attr("cxAriaSmartFilterInputFocus",!0))}$L(this.$node).attr("cxAriaSmartFilterInputKeydown")||(this.listener=this.filterInputKeyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaSmartFilterInputKeydown",!0)),setTimeout(()=>{e.focus()},250)},radioCheck:function(){var e=document.activeElement;setTimeout(()=>{var t=document.activeElement;t.checked?(e.ariaChecked=!1,t.ariaChecked=!0):t.ariaChecked=!1},100)},addLabel:function(e){var t,a=e;if(!e.ariaLabel&&-1!=e.tabIndex){var r=a,n=-1,o=-1;if(r.closest(".paddingElm")){var l=(r=r.closest(".paddingElm")).children;r.querySelector(".cxAriaPrefixLabel")&&(l=r.querySelectorAll(".cxAriaPrefixLabel, [tabIndex], [type=radio]"));for(var i=0;i<l.length;i++)if(l[i].className.includes("cxAriaPrefixLabel")&&(i<l.length-1&&l[i+1]==e||i>1&&l[i-1]==e)){n=i,i>1&&l[i-1]==e?o=i-1:i<l.length-1&&l[i+1]==e&&(o=i+1),r=r.querySelector(".cxAriaPrefixLabel").textContent;break}}if("checkbox"==a.type&&(a=a.parentElement),document.querySelector(".cxMXNFld .cxAriaActive")||a.className.includes("cxMXNFld")){if(document.querySelector(".cxMXNFld .cxAriaActive")){for(var c=document.querySelector(".cxMXNFld .cxAriaActive");!c.className.includes("cxMXNFld");)c=c.parentElement;a=c}a.ariaDescription=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"),t=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"),a.querySelector("input").ariaLabel=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2")}else if("INPUT"==a.tagName)t=a.value?a.value:a.placeholder?a.placeholder:"-";else if(a.childNodes.length>0)if(a.querySelector("span"))t=a.querySelector("span").textContent;else if(a.querySelector("#inputId")||a.querySelector(".cxMXNFld input")){var s;a.querySelector("#inputId")?s=a.querySelector("#inputId"):a.querySelector(".cxMXNFld input")&&(s=a.querySelector(".cxMXNFld input")),s.value?t=s.value:s.placeholder&&(t=s.placeholder)}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){-1!=n&&-1!=o&&(n>o&&n-o==1?t=t+" "+r:n<o&&o-n==1&&(t=r+" "+t));var u=e.closest("[lyte-rendered]");if(u.tagName.includes("LYTE"))switch(u.ltProp("aria",!0),u.tagName){case"LYTE-DROPDOWN":u.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":u.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":u.ltProp("ariaRadio",{"aria-label":t});break;default:u.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-smart-filter-mixin",{onFocus:function(){var e=document.activeElement;if("lv_filter_scroll"!=e.id){var t=document.querySelector(".cxAriaActive");t?$L(t).removeClass("cxAriaActive"):$L(e).addClass("cxAriaActive")}if(e.tagName.includes("ACCORDION-HEADER")){var a=e.parentElement.querySelector("#"+e.attributes["aria-controls"].nodeValue)?e.parentElement.querySelector("#"+e.attributes["aria-controls"].nodeValue):e.parentElement.querySelector("#"+e.id.replace("header","body"));e.tagName.includes("ACCORDION-HEADER")&&a.tagName.includes("ACCORDION-BODY")&&a.querySelector(".noresultstyle")&&(a.querySelector(".noresultstyle").id="noResultOpt",$L(e).removeAttr("ariaLabel"),$L(e).attr("aria-labelledby",e.id+" noResultOpt"))}},onFocusOut:function(){var e=document.querySelector(".cxAriaActive");e&&$L(e).removeClass("cxAriaActive")},filterKeyEvent:function(){if(!this.$node.querySelector("crux-smart-filter-input .cxAriaActive")||event.key.includes("Page")){var e=document.activeElement,t=e.nextElementSibling.querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])");if("LYTE-ACCORDION-HEADER"===e.tagName)for(var a=0;a<t.length;a++)"false"===e.ariaExpanded?$L(t[a]).removeAttr("aria-label"):"true"===e.ariaExpanded&&this.addLabel.call(this,t[a]);var r=this.$node.querySelectorAll(".lyteAccordionActive [tabIndex][click]:not(crux-smart-filter-input [tabIndex][click]), [tabIndex][aria-label]:not(crux-smart-filter-input [tabIndex][aria-label]), .lyteAccordionActive crux-smart-filter-input:not(crux-smart-filter-input crux-smart-filter-input), #searchId #inputId");if(document.activeElement.className.includes("alertPopup")&&" "==event.key)document.querySelector(".alertPopup button").focus();else if(!document.querySelector(".lyteBodyWrapper")){var n;if(event.key.includes("Page")){if("PageUp"==event.key){if(event.preventDefault(),"CRUX-SMART-FILTER-INPUT"==r[n=0].tagName?r[n].previousElementSibling.focus():r[n].focus(),document.activeElement!=r[0])for(;document.activeElement==e;)n=n==r.length-1?-1:n,"CRUX-SMART-FILTER-INPUT"==r[++n].tagName?r[n].previousElementSibling.focus():r[n].focus()}else if("PageDown"==event.key&&(event.preventDefault(),"CRUX-SMART-FILTER-INPUT"==r[n=r.length-1].tagName?r[n].previousElementSibling.focus():r[n].focus(),document.activeElement!=r[r.length-1]))for(;document.activeElement==e;)n=0==n?r.length:n,"CRUX-SMART-FILTER-INPUT"==r[--n].tagName?r[n].previousElementSibling.focus():r[n].focus()}else{for(var o=0;o<r.length;o++)if(e==r[o]){if("ArrowUp"===event.key||"ArrowDown"===event.key||"Tab"===event.key&&"false"===e.ariaExpanded){if(event.preventDefault(),n=o,"ArrowUp"===event.key||"Tab"===event.key&&event.shiftKey){n=0==n?r.length-1:n-1;do{"CRUX-SMART-FILTER-INPUT"==r[n].tagName?r[n].querySelector("[tabIndex]").focus():r[n].focus(),document.activeElement===e&&(n=0==n?r.length:n,n--)}while(document.activeElement===e)}else if("ArrowDown"===event.key||"Tab"===event.key){n=n==r.length-1?0:n+1;do{"CRUX-SMART-FILTER-INPUT"==r[n].tagName?r[n].querySelector("[tabIndex]").focus():r[n].focus(),document.activeElement===e&&(n=n==r.length-1?-1:n,n++)}while(document.activeElement===e);event.stopImmediatePropagation()}}else" "==event.key&&this.checkbox.call(this);break}if("radio"==document.activeElement.type){for(var l=document.activeElement;"CRUX-SMART-FILTER-INPUT"!=l.tagName;)l=l.parentElement;l.querySelector("[class *= selectedRadioBtn]").focus(),event.stopImmediatePropagation()}}}}},bindEventForAriaFilter:function(){if(console.log("Filter Bind..."),this.$node.cxProp("aria")){var e,t=document.activeElement,a=this.$node;if(a.cxProp("search")){var r=a.querySelector("#searchId").querySelector("[tabIndex]");r.value&&(r.ariaLabel=r.value),r.placeholder&&(r.ariaPlaceholder=r.placeholder),r.maxLength&&(r.ariaValueMax=r.maxLength),r.role="search"}if(a.querySelector("lyte-accordion"))for(var n=a.querySelectorAll("lyte-accordion-header"),o=a.querySelectorAll("lyte-accordion-body"),l=0;l<n.length;l++){n[l].ariaLabel=n[l].textContent,e=o[l].querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])");for(var i=0;i<e.length;i++)this.addLabel.call(this,e[i])}else for(var c=(e=a.querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])")).length,s=0;i<c;s++)this.addLabel.call(this,e[s]);for(var u=a.querySelectorAll("[tabIndex][aria-label]:not(crux-smart-filter-input [tabIndex][aria-label])"),d=u.length,m=0;m<d;m++)"checkbox"===u[m].type&&(this.checkboxLis=this.checkbox.bind(this),u[m].addEventListener("click",this.checkboxLis)),u[m].addEventListener("focusin",this.onFocus),u[m].addEventListener("focusout",this.onFocusOut);this.listener=this.filterKeyEvent.bind(this),a.addEventListener("keydown",this.listener);var p=document.querySelector(".alertPopup");p&&p.addEventListener("keydown",this.alertKeyDownEvent),setTimeout(()=>{t.focus()},100)}},alertKeyDownEvent:function(){document.activeElement.className.includes("alertPopup")&&" "==event.key&&document.querySelector(".alertPopup button").focus()},checkbox:function(){setTimeout(()=>{var e=document.querySelector(".alertPopup");e&&(e.addEventListener("keydown",this.alertKeyDownEvent),e.tabIndex=0,e.ariaLabel=document.querySelector(".alertPopup .alertSecondaryMsg").textContent,e.focus())},550)},addLabel:function(e){var t,a=e;if(!e.ariaLabel&&-1!=e.tabIndex){if("checkbox"==a.type&&(a=a.parentElement),"INPUT"==a.tagName)a.value&&(t=a.value),a.placeholder&&(e.ariaPlaceholder=a.placeholder);else if(a.childNodes.length>0){var r=a.querySelector("span"),n=a.querySelector("#inputId"),o=a.querySelector(".cxMXNFld input");if(r)t=r.textContent;else if(n||o){var l=n||o;l.value&&(t=l.value),l.parentElement.className.includes("search")&&(l.placeholder&&(e.ariaPlaceholder=l.placeholder),l.maxLength&&(e.ariaValuemax=l.maxLength))}}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){var i=e.closest("[lyte-rendered]");if(i.tagName.includes("LYTE"))switch(i.ltProp("aria",!0),i.tagName){case"LYTE-DROPDOWN":i.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":i.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":i.ltProp("ariaRadio",{"aria-label":t});break;default:i.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-table-mixin",{phoneMouseOut:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="hidden")},phoneMouseOver:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="visible")},onFocus:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.activeElement,a=this.lyteTable,r=this.querySelector(".cxAriaActive");r&&$L(".cxAriaActive",this).removeClass("cxAriaActive"),t&&!$L(t).hasClass("cxAriaActive")&&$L(t).addClass("cxAriaActive");var n=a.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp"),o=n.length;if(!a.contains(event.relatedTarget)&&n&&event.target===n[o-1]){var l=n[0];if($L(l).hasClass("lyteFixedColumn")){var i=$L(l).cxGetScrollParent();i.scrollLeft=0,i.scrollTop=0}l.focus()}!r||!$L(r).attr("focusable")||r.tagName.includes("TH")||r.tagName.includes("TD")||$L(this).attr("listener")?r&&(r.tagName.includes("TH")||r.tagName.includes("TD"))&&this.querySelector(".cxAriaActive [focusable]")&&$L(this).attr("listener")&&(this.removeEventListener("keydown",e.actionCompEvent),$L(this).removeAttr("listener")):(this.addEventListener("keydown",e.actionCompEvent),$L(this).attr("listener",!0))},onFocusOut:function(){var e=$L(this.querySelector(".cxAriaActive"));e[0]&&(this.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",this).removeClass("cxPrevAriaActive"),e.hasClass("cxPrevAriaActive")||e.addClass("cxPrevAriaActive"),e.removeClass("cxAriaActive"))},keyEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget;!t.tagName.includes("TABLE")&&this.tagName.includes("TABLE")&&(t=this);var a=t;t.querySelector("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)")&&(a=t.querySelector("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)"));var r=a.cruxTable,n=a.lyteTable,o=a.parentCruxComp,l=a.parentWormHole,i=a.modalContainer,c=a.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp");if(o.tagName.includes("CRUX")&&o.cxProp("noContentClass")&&(o.querySelector("."+o.cxProp("noContentClass"))||l.querySelector("."+o.cxProp("noContentClass")))){var s=o.querySelector("."+o.cxProp("noContentClass"))?o.querySelector("."+o.cxProp("noContentClass")):l.querySelector("."+o.cxProp("noContentClass"));if(s.textContent&&""!==s.textContent){if(s.tabIndex=0,s.ariaLabel=s.textContent,$L(s).attr("cxAriaTableKeyEvent")||(s.listener=e.keyEvent.bind(a),s.addEventListener("keydown",s.listener),$L(s).attr("cxAriaTableKeyEvent",!0)),!o.cxProp("noContentClass").includes("noResultAriaComp")){var u=o.cxProp("noContentClass");u+=" noResultAriaComp",o.cxProp("noContentClass",u)}$L(s).attr("cxAriaTableFocus")||(s.addEventListener("focusin",e.onFocus.bind(a)),s.addEventListener("focusout",e.onFocusOut.bind(a)),$L(s).attr("cxAriaTableFocus",!0))}}var d,m=c.length;for(d=0;d<m;d++)e.addLabel.call(a,c[d]);r&&r.tagName.includes("CRUX")&&r.getMethods("afterAriaAdd")&&r.component.executeMethod("afterAriaAdd"),!a.attributes.listener&&a.attributes.cxIsEditOpen&&$L(a).attr("listener",!0),a.attributes&&!a.attributes.listener?a.querySelector(".cxAriaActive")?a.removeEventListener("keydown",e.actionCompEvent):(a.addEventListener("keydown",e.actionCompEvent),$L(a).attr("listener")):a.attributes&&a.attributes.listener&&(a.querySelector(".cxAriaActive")?a.addEventListener("keydown",e.actionCompEvent):(a.removeEventListener("keydown",e.actionCompEvent),$L(a).removeAttr("listener")));var p=o;l!==n&&(p=l);var v=p.querySelector(".cxAriaActive");if((a.querySelector(".cxAriaActive")||a.className.includes("cxAriaActive")||v&&v.className.includes("noResultAriaComp"))&&("CRUX-TABLE-COMPONENT"===a.tagName||!a.querySelector("lyte-table, lyte-expresstable, table"))){var y=a.querySelectorAll("lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component");o&&o.tagName.includes("CRUX")&&(l&&l.querySelector(".noResultAriaComp")?y=l.querySelectorAll(".noResultAriaComp, lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component"):o&&o.querySelector(".noResultAriaComp")&&(y=o.querySelectorAll(".noResultAriaComp, lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component")));var b=y.length;for(d=0;d<b;d++)y[d].className.includes("noResultAriaComp")&&(l&&l.querySelector(".noResultAriaComp")?y=l.querySelectorAll(".noResultAriaComp, lyte-tr:not(lyte-tr.cxUserLookupEmptyRow), lyte-exptable-tr:not(lyte-exptable-tr.cxUserLookupEmptyRow), tr:not(tr.cxUserLookupEmptyRow), crux-lookupfilter-component"):o&&o.querySelector(".noResultAriaComp")&&(y=o.querySelectorAll(".noResultAriaComp, lyte-tr:not(lyte-tr.cxUserLookupEmptyRow), lyte-exptable-tr:not(lyte-exptable-tr.cxUserLookupEmptyRow), tr:not(tr.cxUserLookupEmptyRow), crux-lookupfilter-component")));var x=new Event("mouseover"),f=new Event("mouseout"),A=$L(a),L=!1;if(!A.attr("listener")||"false"===A.attr("listener"))if(event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){for(var h=y.length,E=0;E<h;E++){var g,S=y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),N=0;if(y[E].className&&y[E].className.includes("noResultAriaComp")&&y[E].className.includes("cxAriaActive")&&("ArrowUp"===event.key||"ArrowDown"===event.key))for(S=y[E],g=E;S.className.includes("cxAriaActive");){"ArrowDown"===event.key&&g===h-1?g=0:"ArrowUp"===event.key&&0===g?g=h-1:"ArrowDown"===event.key?g+=1:"ArrowUp"===event.key&&(g-=1),y[g]&&y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td").length>0&&y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[0].focus()}else for(var T=S.length,C=a.querySelector(".cxAriaActive"),k=0;k<T;k++)if(C!==S[k]&&S[k].querySelector(".cxAriaActive")&&S[k].focus(),C===S[k]){var q=document.activeElement;if(g="ArrowUp"===event.key||"ArrowDown"===event.key?E:k,"ArrowUp"===event.key||"ArrowDown"===event.key){event.preventDefault();do{y[g]&&y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k]&&y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].dispatchEvent(f),y[g].dispatchEvent(f),"ArrowUp"===event.key?g=0===g?h-1:g-1:"ArrowDown"===event.key&&(g=g===h-1?0:g+1),y[g].dispatchEvent(x),y[g]&&y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k]?(y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].dispatchEvent(x),y[g].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].focus()):y[g].className.includes("noResultAriaComp")&&(y[g].dispatchEvent(x),y[g].focus())}while(document.activeElement===q&&E!==g);N=1;break}if("ArrowLeft"===event.key||"ArrowRight"===event.key){event.preventDefault();do{y[E]&&y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[g]&&y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[g].dispatchEvent(f),"ArrowLeft"===event.key?g=0===g?T-1:g-1:"ArrowRight"===event.key&&(g=g===T-1?0:g+1),y[E].dispatchEvent(x),y[E]&&y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[g]&&(y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[g].dispatchEvent(x),y[E].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[g].focus())}while(document.activeElement===q&&k!==g);N=1;break}}if(1===N)break}event.stopImmediatePropagation()}else if(" "===event.key||"Enter"===event.key){event.preventDefault();for(var w=document.activeElement;!w.tagName.includes("TH")&&!w.tagName.includes("TD")&&"BODY"!==w.tagName;)w=w.parentElement;for(var D=w;!D.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==D.tagName&&"BODY"!==D.tagName;)D=D.parentElement;if(D.dispatchEvent(x),event.target===w){var P;if(e.clickOnComp(w),w&&(P=w.querySelector("[focusable]:not(.cxSkipFocusable)")),P)if("checkbox"===P.type){var $=P;$L(D).on("click",e=>{"checkbox"===document.activeElement.type&&e.stopImmediatePropagation()}),setTimeout(()=>{$.focus()},100)}else!$L(P).attr("click")&&w.querySelector("[focusable]").tabIndex?(w.dispatchEvent(x),P.focus()):P.focus();else w.attributes&&(w.attributes.click||w.attributes.onclick)?w.click():w.focus();a.attributes&&!a.attributes.listener&&(a.addEventListener("keydown",e.actionCompEvent),a.setAttribute("listener",!0)),i&&i.component&&i.component.parent&&"LYTE-MODAL"===i.component.parent.tagName&&i.component.parent.ltProp("closeOnEscape","false")}}else if("Tab"===event.key){if(L=!0,!a.querySelector(".cxAriaActive")){var O=a.querySelector("[listener]");!O||O.tagName.includes("TH")||O.tagName.includes("TD")||(O.removeEventListener(e.subActionCompEvent),$L(O).removeAttr("listener")),a.attributes&&a.attributes.listener&&(O.tagName.includes("TH")||O.tagName.includes("TD"))&&(a.removeEventListener("keydown",e.actionCompEvent),$L(a).removeAttr("listener"))}var I=a.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(a.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",a).removeClass("cxPrevAriaActive"),event.shiftKey)I[0].focus({preventScroll:!0});else I[I.length-1].focus({preventScroll:!0})}var R=$L(".cxAriaActive",n);if(R&&!L){var F=R[0].offsetLeft,U=R[0].offsetWidth,M=R.cxGetScrollParent();M.scrollLeft>F?M.scrollLeft=F:F+U>M.scrollLeft+M.offsetWidth&&(M.scrollLeft+=F+U-(M.scrollLeft+M.offsetWidth))}if(a.querySelector(".lyteTableFixed")){for(var Y=document.activeElement,B=Y,X=Y;!X.tagName.includes("TR");)(X.tagName.includes("TD")||X.tagName.includes("TH"))&&(B=X),X=X.parentElement;var K=Array.from(X.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, [focusable]")),H=K.indexOf(Y),W=K[H+1];if(event.shiftKey&&(W=K[H-1]),W)for(;!W.tagName.includes("TD")&&!W.tagName.includes("TH");)W=W.parentElement;if(Y.className&&!Y.className.includes("lyteTableFixed")||"Tab"===event.key&&W&&W.className&&!W.className.includes("lyteTableFixed")){"Tab"===event.key&&(B=W);var _=Y,V=Y;for(_.parentElement&&(V=_.parentElement.querySelector("[scroll]"));!V&&_!==a;)(_=_.parentElement)&&(V=(V=_.parentElement).querySelector("[scroll]"));for(var G=X.querySelectorAll(".lyteTableFixed"),j=G.length-1,z=$L(G[j]);"none"===z.css("display")&&0!==j;)j--;var J=G[j].clientWidth,Q=z.offset(),Z=$L(B).offset();if(B&&!B.className.includes("lyteFixedColumn")&&Q&&Q.left&&Z&&Z.left&&Z.left<Q.left+J){var ee=$L(_).scrollLeft()-(Q.left-Z.left+J);$L(_).scrollLeft(ee)}}}}},actionCompEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget,a=t.modalContainer,r=t.querySelectorAll("lyte-tr, lyte-exptable-tr, tr");if(t.attributes&&!t.attributes.listener)t.removeEventListener("keydown",e.actionCompEvent);else{for(var n=document.activeElement;"CRUX-LOOKUPFILTER-COMPONENT"!==n.tagName&&!n.tagName.includes("TR")&&"BODY"!==n.tagName;)n=n.parentElement;if(!document.querySelector(".lyteBodyWrapper")&&("CRUX-LOOKUPFILTER-COMPONENT"!==n.tagName||"ArrowUp"===event.key||"ArrowDown"===event.key)){var o=new Event("mouseover"),l=new Event("mouseout"),i=document.activeElement,c=!0;if("INPUT"===i.tagName&&"text"===i.type&&("ArrowLeft"===event.key||"ArrowRight"===event.key)){c=!1;var s=i.value.length,u=event.target.selectionStart;(s===u&&"ArrowRight"===event.key||0===u&&"ArrowLeft"===event.key)&&(c=!0)}if(c&&event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){var d,m,p,v,y;if(event.preventDefault(),"ArrowLeft"===event.key||"ArrowRight"===event.key){var b=document.activeElement;for(p=b;!b.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==b.tagName&&"BODY"!==b.tagName;)(b.tagName.includes("TH")||b.tagName.includes("TD"))&&(p=b),b=b.parentElement;var x=Array.from(b.querySelectorAll("[focusable]:not(.cxSkipFocusable)"));if(p.attributes&&p.attributes.cxFocusableSelector&&p.attributes.cxFocusableSelector.value){var f=$L(p).attr("cxFocusableSelector");if(f){var A=document.querySelector(f);A&&(x.push(A),e.addLabel.call(t,p))}}var L=x.length;for(d=0;d<L;d++)if(document.activeElement===x[d]&&!x[d].querySelector("[focusable]:not(.cxSkipFocusable)")){v=x[d],m=d;do{for("ArrowLeft"===event.key?m=0===m?L-1:m-1:"ArrowRight"===event.key&&(m=m===L-1?0:m+1),$L(x[m]).attr("click")||b.dispatchEvent(o),y=x[m];!v.tagName.includes("TD")&&!v.tagName.includes("TH")||!y.tagName.includes("TD")&&!y.tagName.includes("TH");)v.tagName.includes("TD")||v.tagName.includes("TH")||(v=v.parentElement),y.tagName.includes("TD")||y.tagName.includes("TH")||(y=y.parentElement);x[m].focus()}while(i===document.activeElement&&d!==m);break}}else{var h=r.length;for(d=0;d<h;d++)if(r[d].querySelector(".cxAriaActive")){for(var E=!1,g=(p=r[d].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")).length,S=0;S<g;S++)if(p[S]&&p[S].className&&p[S].className.includes("cxAriaActive")||p[S].querySelector(".cxAriaActive")){v=document.activeElement,r[m=d].dispatchEvent(l),"ArrowUp"===event.key?m=0===m?h-1:m-1:"ArrowDown"===event.key&&(m=m===h-1?0:m+1);var N=r[m].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[S];for(r[m].dispatchEvent(o),y=N;!v.tagName.includes("TD")&&!v.tagName.includes("TH")||!y.tagName.includes("TD")&&!y.tagName.includes("TH");)v.tagName.includes("TD")||v.tagName.includes("TH")||(v=v.parentElement),y.tagName.includes("TD")||y.tagName.includes("TH")||(y=y.parentElement);!N.querySelector("[focusable]:not(.cxSkipFocusable)")||N.className.includes("cxLookupFieldList")||y.querySelector(".cxSetFocus")?N.attributes.focusable&&N.focus():N.querySelector("[focusable]:not(.cxSkipFocusable)").focus(),E=!0;break}if(E)break}}event.stopPropagation()}else if(" "===event.key||"Enter"===event.key){event.preventDefault();for(var T=document.activeElement,C=T;!C.tagName.includes("TR")&&"BODY"!==C.tagName;)C=C.parentElement;if("checkbox"===T.type){var k=T;$L(C).on("click",e=>{"checkbox"===document.activeElement.type&&e.stopImmediatePropagation()}),setTimeout(()=>{k.focus()},100)}else T.dispatchEvent(o),T.click();setTimeout(()=>{document.querySelector("[pos]:not(.lyteMenuClosed, .lyteMenuHidden)")&&(T.addEventListener("keydown",e.subActionCompEvent),T.setAttribute("listener",!0),T.table=t)},100),event.stopImmediatePropagation()}else if("Escape"===event.key){for(var q=document.activeElement,w=q,D=w;!D.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==D.tagName&&"BODY"!==D.tagName;)(D.tagName.includes("TH")||D.tagName.includes("TD"))&&(w=D),D=D.parentElement;w.querySelector(".cxSetFocus")&&w.querySelector(".cxCloseEdit")&&w.querySelector(".cxCloseEdit").click(),event.target===q&&(D.dispatchEvent(l),w.focus(),w.dispatchEvent(o),t.attributes&&t.attributes.listener&&(t.removeEventListener("keydown",e.actionCompEvent),$L(t).removeAttr("listener")),!t.attributes.listener&&!t.querySelector("[subKeyListen]")&&a&&a.component&&a.component.parent&&"LYTE-MODAL"===a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","true"))}else if("Tab"===event.key){var P=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(event.shiftKey)P[0].focus();else P[P.length-1].focus()}}}},subActionCompEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget.table,a=document.activeElement,r=t.parentCruxComp;if(r.component&&r.component.data&&r.component.data.showSortableOptions){var n=r.querySelector("#sortOrderMenu");if(n&&n.component&&n.component.childComp){a&&"sortOptionSelection"!==$L(a).attr("aria-activedescandant")&&a.setAttribute("aria-activedescendant","sortOptionSelection");var o=n.component.childComp.querySelector(".lyteMenuSelection");o&&"sortOptionSelection"!==o.id&&($L("#sortOptionSelection").removeAttr("id"),o.id="sortOptionSelection")}}t.attributes&&t.attributes.listener&&(t.removeEventListener("keydown",e.actionCompEvent),$L(t).removeAttr("listener"));var l=new Event("mouseover");if("Escape"===event.key)t.attributes&&!t.attributes.listener&&(t.addEventListener("keydown",e.actionCompEvent),$L(t).attr("listener",!0)),a.dispatchEvent(l),a.focus(),a.attributes&&a.attributes.listener&&(a.removeEventListener("keydown",e.subActionCompEvent),$L(a).removeAttr("listener"));else if(event.key.includes("Arrow"))event.preventDefault();else if("Tab"===event.key){var i=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(event.shiftKey)i[0].focus();else i[i.length-1].focus()}else{0===document.querySelectorAll("[pos]:not(.lyteMenuClosed)").length&&(t.attributes&&!t.attributes.listener&&(t.addEventListener("keydown",e.actionCompEvent),$L(t).attr("listener",!0)),a.dispatchEvent(l),a.focus(),a.attributes&&a.attributes.listener&&(a.removeEventListener("keydown",e.subActionCompEvent),$L(a).removeAttr("listener")))}event.stopImmediatePropagation()},bindEventForAria:function(){console.log("bind");var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=this;this.$node&&(t=this.$node),setTimeout(()=>{var a=t.querySelectorAll("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)");if(t)for(var r=a.length,n=0;n<r;n++){var o=a[n];if(("LYTE-TABLE"===o.tagName||"LYTE-EXPRESSTABLE"===o.tagName)&&o.ltProp("aria")||$L(o).attr("lt-prop-aria")||"CRUX-TABLE-COMPONENT"===o.tagName&&o.cxProp("aria")||$L(o).attr("cx-prop-aria")){for(var l=o,i=o,c=o,s=o,u=o;"BODY"!==u.tagName&&"TABLE"!==o.tagName;){if(u.tagName.includes("CRUX")&&"CRUX-TABLE-COMPONENT"!==u.tagName&&(c=u),"LYTE-TABLE"===u.tagName||"LYTE-EXPRESSTABLE"===u.tagName)i=u;else if("CRUX-TABLE-COMPONENT"===u.tagName)l=u;else if(u._callee&&u._callee.component&&u._callee.component.childComp&&u._callee.component.childComp===c)s=u;else if("BODY"===u.tagName)break;if(!u._callee)break;u=u._callee}"CRUX-TABLE-COMPONENT"===c.tagName&&(l=c),l.cruxTable=l,l.lyteTable=i,l.parentCruxComp=c,l.parentWormHole=s,i.cruxTable=l,i.lyteTable=i,i.parentCruxComp=c,i.parentWormHole=s,o.lyteTable&&o.lyteTable.tagName.includes("LYTE")&&o.lyteTable.ltProp("tabIndex","-1");for(var d=o.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),m=0,p=d.length,v=0;v<p;v++){if(!$L(d[v]).attr("lt-prop-data-tabindex")&&($L(o).attr("cx-prop-group-index")||c.tagName.includes("CRUX")&&c.cxProp("groupIndex"))){var y=c.tagName.includes("CRUX")?c.cxProp("groupIndex"):$L(o).attr("cx-prop-group-index");d[v].setAttribute("lt-prop-data-tabindex","group"+y+"-"+m),m++}0===d[v].tabIndex&&d[v].ariaLabel||e.addLabel.call(o,d[v]),d[v].querySelector(".cxSetFocus")&&e.clickOnComp(this,d[v])}if(l.tagName.includes("CRUX")&&l.getMethods("afterAriaAdd")&&l.component.executeMethod("afterAriaAdd"),c.tagName.includes("CRUX")&&c.cxProp("noContentClass")&&c.querySelector("."+c.cxProp("noContentClass"))){var b=l.querySelector("."+l.cxProp("noContentClass"));if(b.textContent&&""!==b.textContent){if(b.tabIndex=0,b.ariaLabel=b.textContent,!l.cxProp("noContentClass").includes("noResultAriaComp")){var x=l.cxProp("noContentClass");x+=" noResultAriaComp",l.cxProp("noContentClass",x)}$L(b).attr("focusable")||$L(b).attr("focusable",!0),$L(b).attr("cxAriaTableFocus")||(b.addEventListener("focusin",e.onFocus.bind(o)),b.addEventListener("focusout",e.onFocusOut.bind(o)),$L(b).attr("cxAriaTableFocus",!0))}}if((!$L(t).attr("cxAriaTableFocusableParent")||t&&t.attributes&&t.attributes.cxAriaTableFocusableParent&&!t.attributes.cxAriaTableFocusableParent.nodeValue)&&(document.addEventListener("click",e.clickOnDoc),document.addEventListener("keydown",e.escOnDoc),$L(t).attr("cxAriaTableFocusableParent",!0)),$L(o).attr("cxAriaTableKeydown")||(o.listener=e.keyEvent.bind(o),o.addEventListener("keydown",o.listener),o.addEventListener("click",e.clickOnTable),o._this=this,$L(o).attr("cxAriaTableKeydown",!0)),!o.attributes||!o.attributes.listener||o.querySelector(".cxAriaActive")&&$L(".cxAriaActive",o).attr("focusable")||($L(o).removeAttr("listener"),o.removeEventListener("keydown",e.actionCompEvent)),document.querySelector("[cxAriaTableFocusableParent]")){var f=document.querySelector("[cxAriaTableFocusableParent]");if(f&&f.component){var A=f=f.component;for(A&&A.$node&&(A=A.$node);A&&(!A.component||!A.component.parent)&&"LYTE-WORMHOLE"!==A.tagName&&"BODY"!==A.tagName;)A=A.parentElement;l.modalContainer=A,i.modalContainer=A}}}}},100)},clickOnComp:function(e){var t=Lyte.registeredMixins["crux-aria-table-mixin"],a=!1;setTimeout(()=>{if(e.childElementCount>0){for(let[t,r]of Object.entries(e.children))if("none"!==$L(r).css("display")){a=!0;break}}else e.textContent&&(a=!0);for(var r=e;"BODY"!==r.tagName&&"LYTE-TABLE"!==(r=r.parentElement).tagName&&"LYTE-EXPRESSTABLE"!==r.tagName&&"TABLE"!==r.tagName;);if(a){var n=document.activeElement.closest("[focusable]");if(!e.querySelector(".cxSetFocus")&&n&&n===e&&$L(e).addClass("cxSetFocus"),e.className.includes("cxSetFocus")||e.querySelector(".cxSetFocus")){var o=e;o.querySelector(".cxSetFocus")&&(o=o.querySelector(".cxSetFocus")),o.querySelectorAll("[tabIndex], input, [onclick]").forEach(e=>{var a=$L(e);if("none"!==a.css("display")&&"hidden"!==a.css("visibility")&&!e.className.includes("hidden")&&-1!==e.tabindex&&(a.attr("focusable",!0),(e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tabIndex&&(e.tabIndex=0,!e.ariaLabel)))if(e.value){var n=e.value;n&&(e.ariaLabel=n)}else e.textContent&&""!==e.textContent.trim()&&(e.ariaLabel=e.textContent.trim());e.attributes&&e.attributes.onclick&&$L(e).on("click",()=>{o.focus(),("LYTE-TABLE"===r.tagName||"LYTE-EXPRESSTABLE"===r.tagName||"TABLE"===r.tagName)&&e.attributes&&r.attributes.listener&&(r.removeEventListener("keydown",t.actionCompEvent),$L(r).removeAttr("listener")),r.querySelectorAll("[nonFocusable]").forEach(e=>{(e.tagName.includes("TH")||e.tagName.includes("TD"))&&r&&r.attributes&&!r.attributes.listener&&($L(e).attr("focusable","true"),$L(e).removeAttr("nonFocusable"))})}),o.querySelectorAll("[focusable]:not(.cxSkipFocusable)").forEach(e=>{e.querySelector("[focusable]:not(.cxSkipFocusable)")&&$L(e).removeAttr("focusable")})})}}},500)},clickOnTable:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.activeElement,a=event.currentTarget;event.target;setTimeout(()=>{e.addLabel.call(a,t);var r=a.cruxTable,n=a.lyteTable,o=a.parentCruxComp,l=a.modalContainer;if(r.tagName.includes("CRUX")&&r.getMethods("afterAriaAdd")&&r.component.executeMethod("afterAriaAdd"),(t=document.activeElement).attributes&&t.attributes.focusable&&(!t.tagName.includes("TD")&&!t.tagName.includes("TH")||o.component&&o.component.data&&o.component.data.showSortableOptions)&&a.querySelector(".cxAriaActive:not(crux-lookupfilter-component .cxAriaActive)")){if(o.component&&o.component.data&&o.component.data.showSortableOptions){var i=o.querySelector("#sortOrderMenu");if(i&&i.component&&i.component.childComp){t&&"sortOptionSelection"!==$L(t).attr("aria-activedescandant")&&t.setAttribute("aria-activedescendant","sortOptionSelection");var c=i.component.childComp.querySelector(".lyteMenuSelection");c&&"sortOptionSelection"!==c.id&&($L("#sortOptionSelection").removeAttr("id"),c.id="sortOptionSelection")}}n.attributes&&!n.attributes.listener&&(n.addEventListener("keydown",e.actionCompEvent),$L(n).attr("listener",!0)),t.attributes&&!t.attributes.listener&&setTimeout(()=>{document.querySelector("[pos]:not(.lyteMenuClosed, .lyteMenuHidden)")&&(t.addEventListener("keydown",e.subActionCompEvent),$L(t).attr("listener",!0),t.table=a)},100)}else!t.tagName.includes("TD")&&!t.tagName.includes("TH")||t.querySelector("[focusable]:not(.cxSkipFocusable)")||t.attributes.click||t.attributes.onclick||t.querySelector("[focusable]:not(lyte-td[focusable], lyte-th[focusable], lyte-exptable-td[focusable], lyte-exptable-th[focusable], td[focusable], th[focusable], .cxSkipFocusable)")||$L(n).removeAttr("listener");var s;new Event("mouseover"),new Event("mouseout");if(s=document.querySelector(".cxAriaActive")?document.querySelector(".cxAriaActive"):document.querySelector(".cxPrevAriaActive")){for(var u=s;!u.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==u.tagName&&"BODY"!==u.tagName;)(u.tagName.includes("TH")||u.tagName.includes("TD"))&&u,u=u.parentElement;!n.attributes.listener&&!n.querySelector("[subKeyListen]")&&l&&l.component&&l.component.parent&&"LYTE-MODAL"===l.component.parent.tagName&&!s.attributes.focusable?l.component.parent.ltProp("closeOnEscape","true"):l&&l.component&&l.component.parent&&l.component.parent.ltProp("closeOnEscape")&&l.component.parent.ltProp("closeOnEscape","false"),"CRUX-LOOKUPFILTER-COMPONENT"===u.tagName&&u.attributes.listener&&$L(u).removeAttr("listener")}},300)},clickOnDoc:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.querySelector("[cxAriaTableFocusableParent]");if(t&&"hidden"!==$L(t).css("visibility")){var a=document.activeElement,r=event.target;if("BODY"===a.tagName&&document.querySelector("lyte-table .cxPrevAriaActive, lyte-expresstable .cxPrevAriaActive, table .cxPrevAriaActive, lyte-table .cxAriaActive, lyte-expresstable .cxAriaActive, table .cxAriaActive")){for(r=document.querySelector(".cxPrevAriaActive");"TABLE"!==r.tagName&&"LYTE-TABLE"!==r.tagName&&"LYTE-EXPRESSTABLE"!==r.tagName&&"BODY"!==(r=r.parentElement).tagName;);var n=r.lyteTable;r.removeEventListener("keydown",e.actionCompEvent),r.attributes.listener&&$L(r).removeAttr("listener"),n.removeEventListener("keydown",e.actionCompEvent),n.attributes.listener&&$L(n).removeAttr("listener"),"BODY"===a.tagName&&(n.querySelector(".cxAriaActive")?a=n.querySelector(".cxAriaActive"):n.querySelector(".cxPrevAriaActive")&&(a=n.querySelector(".cxPrevAriaActive"))),a.removeEventListener("keydown",e.subActionCompEvent),a.attributes.listener&&$L(a).removeAttr("listener")}setTimeout(()=>{t&&"hidden"!==$L(t).css("visibility")||(document.removeEventListener("keydown",e.escOnDoc),document.removeEventListener("click",e.clickOnDoc),$L(t).removeAttr("cxAriaTableFocusableParent"))},100)}setTimeout(()=>{t&&"hidden"!==$L(t).css("visibility")||(document.removeEventListener("keydown",e.escOnDoc),document.removeEventListener("click",e.clickOnDoc),t&&"hidden"===$L(t).css("visibility")&&$L(t).attr("cxAriaTableFocusableParent",!1))},100)},addLabel:function(e){(e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tabIndex&&(e.tabIndex=0);var t=Lyte.registeredMixins["crux-aria-table-mixin"],a=this;this.$node&&(a=this.$node);var r=a.cruxTable,n=a.lyteTable,o=a;n.tagName.includes("LYTE")&&"TABLE"!==o.tagName&&(o=n);var l=!1;if(e.childElementCount>0){for(let[t,a]of Object.entries(e.children))if("none"!==$L(a).css("display")){l=!0;break}}else e.textContent?l=!0:"none"!==$L(e).css("display")&&(l=!0);var i=e;if(e.tagName.includes("TD")||e.tagName.includes("TH"))for(;!i.tagName.includes("TR");)i=i.parentElement;if(l){if(!(e.querySelector("table")||e.querySelector("lyte-table")||e.querySelector("lyte-expresstable"))){var c="",s="";if(r&&r.component&&r.component.data&&r.component.data.cxPropModule&&moduleRecordMapping[r.component.data.cxPropModule]&&moduleRecordMapping[r.component.data.cxPropModule].display_field&&moduleRecordMapping[r.component.data.cxPropModule].display_field.id&&!e.tagName.includes("TH"))c=moduleRecordMapping[r.component.data.cxPropModule].display_field.id,document.getElementById(c)||(c=moduleRecordMapping[r.component.data.cxPropModule].fields.filterBy({api_name:"Last_Name"})[0].id),document.getElementById(c)&&(s=document.getElementById(c)._cx.itemIndex);else if(n&&n.id.includes("cruxUserLookupTable")&&r&&r._callee){for(var u,d=r._callee;!d.tagName.includes("CRUX");)if("BODY"===(d=d._callee).tagName){d=r._callee;break}if(d.tagName.includes("CRUX")){var m=(d=d.component.data.cxPropHeader).length;for(u=0;u<m;u++)if("full_name"===d[u].systemValue){c=d[u].displayValue;break}}var p=o.querySelectorAll("lyte-th, lyte-exptable-th, th"),v=p.length;for(u=0;u<v;u++)p[u].textContent===c&&(s=u)}var y=i.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),b="";if(e.tagName.includes("TD")&&(r.tagName.includes("CRUX")||n.tagName.includes("LYTE"))){var x="",f="";r.tagName.includes("CRUX")&&r.component&&r.component.data&&r.component.data.cxPropHeaderRowId?(x=r.component.data.cxPropHeaderRowId,f=r.querySelector("#"+x).querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")):o.querySelectorAll("lyte-th, lyte-exptable-th, th")&&(f=o.querySelectorAll("lyte-th, lyte-exptable-th, th")),y.forEach((t,a)=>{t===e&&f[a]&&""!==f[a].textContent.trim()&&(b+=f[a].textContent.trim())})}var A=b.length;A>0&&(b=b.trim()+" ");var L=e.querySelector("[lt-prop-title]"),h=e.querySelector("#labelText");if((e.querySelector("lyte-checkbox")||e.querySelector("lyte-radiobutton"))&&""!==s)b=b.trim(),b+="select record ",y.forEach((e,t)=>{t===s&&(b+=e.textContent.trim())});else if(e.tagName.includes("TH"))h?b+=h.textContent.trim():e.textContent.trim()?b+=e.textContent.trim():e.attributes&&e.attributes["lt-prop-title"]&&e.attributes["lt-prop-title"].nodeValue?b+=e.attributes["lt-prop-title"].nodeValue.trim():L&&L.attributes&&L.attributes["lt-prop-title"]&&L.attributes["lt-prop-title"].nodeValue&&(b+=L.attributes["lt-prop-title"].nodeValue.trim());else if(!e.tagName.includes("TH")&&!e.tagName.includes("TD")){for(var E=e;!E.tagName.includes("TH")&&!E.tagName.includes("TD")&&!((E=E.parentElement).tagName.includes("TR")||E.tagName.includes("BODY")||E.tagName.includes("TABLE")););(E.tagName.includes("TH")||E.tagName.includes("TD"))&&E.ariaLabel&&!e.ariaLabel&&""===b&&(b=E.ariaLabel.trim())}if((A=b.length)>0&&(b=b.trim()+" "),e.querySelector("[tabIndex]"))if(e.querySelector("[tabIndex]").tagName.includes("CRUX")||e.querySelector("[tabIndex]").tagName.includes("LYTE")){var g=e.querySelector("[tabIndex]").tagName.split("-")[1];b+=g.trim()}else b.includes("select")||(b=b.trim(),e.querySelector("a")||e.querySelector("[tabIndex]").className.includes("link")||e.querySelector("[tabIndex]").className.includes("Link")?b+=" link":""!==e.textContent.trim()&&(b+=" text"));var S=Array.from(e.querySelectorAll("[tabIndex]:not(.cxSkipFocusable), [click]:not(.cxSkipFocusable), [focus]:not(.cxSkipFocusable), [focusable]:not(.cxSkipFocusable), crmutil-icon:not(.cxSkipFocusable), a:not(.cxSkipFocusable), button:not(.cxSkipFocusable)"));if(e.attributes&&e.attributes.cxFocusableSelector&&e.attributes.cxFocusableSelector.value){var N=$L(e).attr("cxFocusableSelector");if(N){var T=document.querySelector(N);T&&S.push(T)}}for(var C=S.length,k=0;k<C;k++){if(S[k].tagName.includes("LYTE")||S[k]._callee&&S[k]._callee.tagName.includes("LYTE")){var q=S[k];!S[k].tagName.includes("LYTE")&&S[k]._callee.tagName.includes("LYTE")&&(q=S[k]._callee),q.component.data.ltPropAria||q.ltProp("aria",!0),b.includes("text")?b=b.replace("text","").trim():b.includes("link")&&(b=b.replace("link","").trim()),b=b.trim(),"LYTE-DROPDOWN"===q.tagName?q.ltProp("ariaButton",{"aria-label":b}):"LYTE-CHECKBOX"===q.tagName?q.ltProp("ariaCheckbox",{"aria-label":b}):"LYTE-RADIOBUTTON"===q.tagName?q.ltProp("ariaRadio",{"aria-label":b}):q.tagName.includes("LYTE")&&q.ltProp("ariaAttributes",{"aria-label":b})}for(var w=0;w<C;w++)if("none"!==$L(S[w]).css("display")&&S[k]!==S[w])for(var D=S[w];!(D.tagName.includes("TH")||D.tagName.includes("TD")||D.tagName.includes("TR")||"BODY"===D.tagName);){if(D===S[k]){$L(S[k]).removeAttr("focusable"),$L(S[k]).attr("nonFocusable","true");break}D=D.parentElement}if(!$L(S[k]).attr("nonFocusable")){var P=S[k];if(!P.querySelector("[tabindex][aria-label]:not([focusable], .cxSkipFocusable)")&&(P.attributes&&!P.attributes.focusable&&-1!==P.tabIndex&&$L(P).attr("focusable","true"),(P.tagName.includes("TD")||P.tagName.includes("TH"))&&-1===P.tagName&&(P.tabIndex=0),b&&(e.ariaLabel=b.replace(/ +/g," ").trim()),!P.ariaLabel))if(P.className.includes("cxTableSortIcon"))P.ariaLabel="Column Options";else if(P.textContent&&""!==P.textContent.trim())P.ariaLabel=P.textContent.replace(/ +/g," ").trim();else if(!P.tagName.includes("TH")&&!P.tagName.includes("TD")){for(var $=P;!$.tagName.includes("TH")&&!$.tagName.includes("TD")&&!(($=$.parentElement).tagName.includes("TR")||$.tagName.includes("BODY")||$.tagName.includes("TABLE")););if(($.tagName.includes("TH")||$.tagName.includes("TD"))&&$.ariaLabel&&!P.ariaLabel){var O=$.ariaLabel;O.includes("text")?O=O.replace("text",""):O.includes("link")&&(O=O.replace("link",""))}}P.attributes&&P.attributes.focusable&&P.querySelector("[focusable]:not(.cxSkipFocusable)")&&($L(P).removeAttr("[focusable]"),P.querySelectorAll("[focusable]:not(.cxSkipFocusable)").forEach(e=>{e.querySelector("[focusable]:not(.cxSkipFocusable)")&&$L(e).removeAttr("[focusable]")}))}}var I,R=e.textContent.trim();R&&(I=R.length),(!e.querySelector('[tabIndex = "0"]')&&I&&I>0||b)&&((e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tagName&&(e.tabIndex=0),b&&(e.ariaLabel=b.replace(/ +/g," ").trim()));var F,U=e.querySelectorAll("[focusable]:not(.cxSkipFocusable)");U&&(F=U.length),!(F&&F<1)||o.attributes.listener&&$L(e).attr("nonFocusable")||($L(o).attr("cxIsEditOpen")&&$L(e).attr("focusable")?$L(e).removeAttr("focusable"):$L(o).attr("cxIsEditOpen")||$L(e).attr("focusable","true"))}$L(e).attr("cxAriaTableFocus")||(e.addEventListener("focusin",t.onFocus.bind(o)),e.addEventListener("focusout",t.onFocusOut.bind(o)),$L(e).attr("cxAriaTableFocus",!0))}}});
//# sourceMappingURL=crux-accessibility-mixin.js.f53cf0689a4956153a5bbe4055902565.map